{% load i18n %} {% load static %}

<link rel="stylesheet" href="{% static 'css/chat.css' %}" />

<div class="fixed bottom-4 right-4 z-50 rounded-full">
  <button
    id="chatbot-toggle"
    class="bg-blue-600 text-white px-6 py-2 rounded-full shadow-md flex items-center justify-center focus:outline-none"
  >
    <i class="fas fa-comment-dots"></i>
  </button>
</div>

<div
  id="chatbot-container"
  class="fixed bottom-2 right-4 w-96 bg-white shadow-md rounded-tl-lg rounded-bl-lg p-6 transform translate-x-full transition-transform duration-300 hidden"
>
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-semibold">Onsebat- {% trans 'Chatbot' %}</h3>
    <button id="chatbot-close" class="text-gray-600 hover:text-gray-800 focus:outline-none">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div>
    <div id="chatbot-messages" class="space-y-4">
      <!-- to do : add messages  -->
    </div>
    <div>
      <style>
        
        #bot-icon {
          animation: thinking 2s infinite;
        }
      
        @keyframes thinking {
          0% {
            transform: rotate(0deg) scale(1);
          }
          50% {
            transform: rotate(5deg) scale(1.1);
          }
          100% {
            transform: rotate(0deg) scale(1);
          }
        }
        
      </style>
      <div id="chargement" class="hidden" class="max-w-md mx-auto p-6 ">
        <div class="max-w-xs mx-auto mt-8  p-4">
          <div class="text-center text-gray-700">
            <i id="bot-icon" class="fas fa-robot" style="font-size: 3rem;"></i>
          </div>
        </div>
      </div>

    </div>
  </div>
  <form id="chatbot-form" class="flex items-center space-x-4 mt-8" method="post" action="{% url 'chat' %}">
    {% csrf_token %}
    <div class="w-full flex justify-center items-center gap-2">
      <textarea id="chatbot-input" class="w-full" placeholder="{% trans 'Posez votre question ici...'%}" name="question"></textarea>
      <div class="justify-center items-center flex rounded-full">
        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-full hover:bg-blue-700">
          <i class="fa fa-paper-plane" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </form>
</div>

<script src="{% static 'js/chat.js' %}"></script>
